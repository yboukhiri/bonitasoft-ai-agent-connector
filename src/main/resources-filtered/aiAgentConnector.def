<?xml version="1.0" encoding="UTF-8"?>
<definition:ConnectorDefinition xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:definition="http://www.bonitasoft.org/ns/connector/definition/6.1">
    
    <!-- ═══════════════════════════════════════════════════════════════════════════
         CONNECTOR IDENTIFICATION
         ═══════════════════════════════════════════════════════════════════════════ -->
    <id>${connector-definition-id}</id>
    <version>${connector-definition-version}</version>
    <icon>connector.png</icon>
    <category icon="connector.png" id="AI"/>
    
    <!-- ═══════════════════════════════════════════════════════════════════════════
         CONNECTOR INPUTS
         
         Simplified contract:
         - apiSecretKey: Optional API key for authentication (Bearer token)
         - input: Main input data as Map (mandatory)
         - params: Optional parameters for agent customization
         - timeoutMs: Request timeout in milliseconds
         ═══════════════════════════════════════════════════════════════════════════ -->
    
    <!-- API Secret Key: Optional authentication key for secured agent endpoints -->
    <input mandatory="false" name="apiSecretKey" type="java.lang.String"/>
    
    <!-- Input: The main input data as a Map/JSON object (e.g., {"question": "..."}) -->
    <input mandatory="true" name="input" type="java.util.Map"/>
    
    <!-- Params: Optional parameters for the agent (e.g., {"top_k": 3, "min_confidence": 0.65}) -->
    <input mandatory="false" name="params" type="java.util.Map"/>
    
    <!-- Timeout: Request timeout in milliseconds (default: 30000) -->
    <input mandatory="false" name="timeoutMs" type="java.lang.Integer" defaultValue="30000"/>
    
    <!-- ═══════════════════════════════════════════════════════════════════════════
         CONNECTOR OUTPUTS
         
         Response contract:
         - status: ok | low_confidence | error
         - output: Main result (answer, sources, confidence, reasoning)
         - usage: Performance metrics (latency_ms, tokens, model)
         - error: Error message if failed, null otherwise
         ═══════════════════════════════════════════════════════════════════════════ -->
    
    <!-- Status: Response status from the agent -->
    <output name="status" type="java.lang.String"/>
    
    <!-- Output: Main result containing answer, sources, confidence, reasoning -->
    <output name="output" type="java.util.Map"/>
    
    <!-- Usage: Performance metrics -->
    <output name="usage" type="java.util.Map"/>
    
    <!-- Error: Error message if the request failed, null otherwise -->
    <output name="error" type="java.lang.String"/>
    
</definition:ConnectorDefinition>
